@model SAPPub.Web.Models.SecondarySchool.AcademicPerformanceAttainmentAndProgressViewModel;
@using SAPPub.Web.ViewComponents.VerticalNavigation


@{
    ViewData["Title"] = "Academic Performance";
}

<div class="govuk-grid-row">
    @await Component.InvokeAsync("VerticalNavigation",
    new VerticalNavigationModel
    {
        URN = Model.URN,
        SchoolName = Model.SchoolName,
        ActivePage = RouteConstants.SecondaryAcademicPerformanceAttainmentAndProgress
    })

    <div class="govuk-grid-column-three-quarters">
        <span id="school-name-caption" class="govuk-caption-l">@Model.SchoolName</span>
        <h1 class="govuk-heading-l">@ViewBag.Title</h1>
        <p class="govuk-body">
            Looking at school performance data is one way to see how well a school is doing.
            You should look at a range of information about a school before deciding if it’s the right fit for your child.
        </p>

        <nav id="sub-navigation-academic-performance" class="moj-sub-navigation" aria-label="Sub navigation">
            <ul class="moj-sub-navigation__list">
                <li class="moj-sub-navigation__item">
                    <a class="moj-sub-navigation__link" aria-current="page" asp-route="@RouteConstants.SecondaryAcademicPerformanceAttainmentAndProgress" asp-all-route-data="@Model.RouteAttributes">Attainment and progress</a>
                </li>
                <li class="moj-sub-navigation__item">
                    <a class="moj-sub-navigation__link" asp-route="@RouteConstants.SecondaryAcademicPerformanceEnglishAndMathsResults" asp-all-route-data="@Model.RouteAttributes">English and maths results</a>
                </li>
                <li class="moj-sub-navigation__item">
                    <a class="moj-sub-navigation__link" asp-route="@RouteConstants.SecondaryAcademicPerformanceSubjectsEntered" asp-all-route-data="@Model.RouteAttributes">Subjects entered</a>
                </li>                
            </ul>
        </nav>

        <h2 class="govuk-heading-l">Attainment and progress of pupils in the previous academic year</h2>

        <p class="govuk-body">
            Information in this section is for the 2024 to 2025 academic year.
        </p>

        <form method="get" asp-action="AcademicPerformanceAttainmentAndProgress" asp-controller="SecondarySchool" asp-fragment="filterSection">
            <div id="filterSection" class="select-filter">
                <govuk-select-label for="academicyearSelector" class="govuk-label govuk-!-font-weight-bold">Choose the academic year you want to see results for</govuk-select-label>
                <select id="academicyearSelector" class="govuk-select" asp-for="SelectedAcademicYear" asp-items="Model.AcademicYearsSelectList"></select>
                <govuk-button type="submit">Show results</govuk-button>
            </div>
        </form>

        <h3 class="govuk-heading-m">Attainment 8</h3>

        <p class="govuk-body">
            Attainment 8 is used to assess a pupil’s average achievement across their best performing 8 subjects.
        </p>

        <govuk-details id="details-attainment8">
            <govuk-details-summary>
                Find out more about Attainment 8
            </govuk-details-summary>
            <govuk-details-text>
                <p class="govuk-body">
                    The 8 subjects that are used in Attainment 8 are split into 3 groups:
                </p>
               
                <ul class="govuk-list govuk-list--bullet">
                    <li>
                        English and maths, which are both double-weighted
                    </li>
                    <li>
                        EBacc subjects, these are a group of GCSE subjects that help students gain a broad set of knowledge and skills.
                        These subjects include sciences, geography, history, and languages                        
                    </li>
                    <li>
                        open group which includes any other approved GCSEs or vocational qualifications
                    </li>
                </ul>

                <p class="govuk-body">
                    Each GCSE grade is given a point score (for example grade 9 = 9 points, grade 8 = 8 points, and so on).
                    The scores from the best 8 subjects (with English and Maths counting twice) are added together to give the Attainment 8 score.
                </p>

                <p class="govuk-body">
                    If a student scores high grades across these subjects, their Attainment 8 score will be higher.  The maximum score a pupil can have is 90.
                </p>
            </govuk-details-text>
        </govuk-details>

        <h3 class="govuk-heading-m">Progress 8</h3>

        <p class="govuk-body">
            Progress 8 is a performance measure used to show how much progress pupils make from the end of primary school (KS2)
            to the end of secondary school (KS4) across their best performing 8 subjects.            
        </p>

        <p class="govuk-body">
            Progress 8 is calculated by comparing the pupil’s actual Attainment 8 score to their estimated Attainment 8 score based on their results at the end of primary school (KS2).
        </p>

        <govuk-details id="details-progress8">
            <govuk-details-summary>
                Find out more about Progress 8
            </govuk-details-summary>
            <govuk-details-text>
                <p class="govuk-body">
                    Progress 8 shows how much progress a pupil made compared to other pupils with similar starting points at the end of primary school.
                </p>

                <p class="govuk-body">
                    The score shows progress compared to the national average:
                </p>

                <ul class="govuk-list govuk-list--bullet">
                    <li>
                        a score of 0 means students made average progress compared to others with similar starting points
                    </li>
                    <li>
                        a positive score of more than 0 means pupils made more progress than average
                    </li>
                    <li>
                        a negative score of less than 0 means students made less progress than average
                    </li>
                </ul>
            </govuk-details-text>
        </govuk-details>

        @if (Model.ShowProgress8NotAvailableInfo)
        {
            <div class="custom-card" data-testid="progress8-custom-card">
                <div class="custom-card__icon"></div>
                <div class="custom-card__content">
                    <p class="govuk-body">
                        There are no Progress 8 scores for the academic years 2024 to 2025 and
                        2025 to 2026, as there is no KS2 assessment data available to
                        calculate the baseline. This is due to COVID-19 disruption.
                    </p>
                </div>
            </div>
        }

        <govuk-pagination id="academic-performance-attainment-and-progress-pagination">
            <govuk-pagination-previous asp-route="@RouteConstants.SecondaryAttendance" asp-all-route-data="@Model.RouteAttributes">Attendance</govuk-pagination-previous>
            <govuk-pagination-next asp-route="@RouteConstants.SecondaryAcademicPerformanceEnglishAndMathsResults" asp-all-route-data="@Model.RouteAttributes">Academic performance: English and maths results</govuk-pagination-next>
        </govuk-pagination>
    </div>
</div>
